<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.MenuMapper">
    <insert id="insertMenuAll" parameterType="menuDTO">
        INSERT INTO `menu` (`menu_name`, `store_name`, `category`, `menu_price`, `discount`, `stock`, `orderCount`)
        VALUES (#{menu_name}, #{store_name}, #{category}, ${menu_price}, ${discount}, ${stock}, ${orderCount});
    </insert>

    <select id="showMenu" resultType="map">
        select category, menu.menu_name, menu.menu_price, `menu_has_option`.option_name
        from menu
        left join menu_has_option
        on menu.menu_name = menu_has_option.menu_name
        order by menu.category, menu.menu_name
    </select>

    <update id="updateMenuAll">
        UPDATE menu
        set menu_name = #{new_menu_name}, menu_price = ${new_price}
        where menu_name like #{menu_name}
    </update>

    <update id="updateMenuName">
        UPDATE menu
        set menu_name = #{new_menu_name}
        where menu_name like #{menu_name}
    </update>

    <update id="updateMenuPrice">
        UPDATE menu
        set menu_price = ${new_price}
        where menu_name like #{menu_name}
    </update>

</mapper>